{"_id":"disposables","_rev":"3-57fdb9599c4edaceffee7ab55a8009df","name":"disposables","description":"Disposables let you safely compose resource disposal semantics","dist-tags":{"latest":"1.0.1"},"versions":{"1.0.0":{"name":"disposables","version":"1.0.0","description":"Disposables let you safely compose resource disposal semantics","main":"dist-modules/index.js","scripts":{"build":"./scripts/build","test":"./scripts/test","test-cov":"./scripts/test-cov","prepublish":"npm run build"},"repository":{"type":"git","url":"https://github.com/gaearon/disposables.git"},"author":{"name":"Cloud Programmability Team","url":"https://github.com/Reactive-Extensions/RxJS/blob/master/authors.txt"},"licenses":[{"type":"Apache License, Version 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"}],"bugs":{"url":"https://github.com/gaearon/disposables/issues"},"homepage":"https://github.com/gaearon/disposables","devDependencies":{"babel":"^5.0.10","expect.js":"^0.3.1","istanbul":"~0.3.7","mocha":"^2.0.1"},"contributors":[{"name":"Matthew Podwysocki","email":"matthewp@microsoft.com"},{"name":"Bart de Smet","email":"bartde@microsoft.com"},{"name":"Erik Meijer","email":"emeijer@microsoft.com"},{"name":"Dan Abramov","email":"dan.abramov@me.com"}],"gitHead":"31497ef4de9f3eb28a40e0d9a7591d2991f81d81","_id":"disposables@1.0.0","_shasum":"d0b28e6e1ade8fa6f176c12577aadeea73946086","_from":".","_npmVersion":"2.7.0","_nodeVersion":"1.5.1","_npmUser":{"name":"gaearon","email":"dan.abramov@gmail.com"},"maintainers":[{"name":"gaearon","email":"dan.abramov@gmail.com"}],"dist":{"shasum":"d0b28e6e1ade8fa6f176c12577aadeea73946086","tarball":"https://registry.npmjs.org/disposables/-/disposables-1.0.0.tgz"},"directories":{}},"1.0.1":{"name":"disposables","version":"1.0.1","description":"Disposables let you safely compose resource disposal semantics","main":"modules/index.js","scripts":{"build":"./scripts/build","test":"./scripts/test","test-cov":"./scripts/test-cov","prepublish":"npm run build"},"repository":{"type":"git","url":"https://github.com/gaearon/disposables.git"},"author":{"name":"Cloud Programmability Team","url":"https://github.com/Reactive-Extensions/RxJS/blob/master/authors.txt"},"contributors":[{"name":"Dan Abramov","email":"dan.abramov@me.com"}],"licenses":[{"type":"Apache License, Version 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"}],"bugs":{"url":"https://github.com/gaearon/disposables/issues"},"homepage":"https://github.com/gaearon/disposables","devDependencies":{"babel":"^5.0.10","expect.js":"^0.3.1","istanbul":"~0.3.7","mocha":"^2.0.1"},"gitHead":"4db84f1de17015d908c9e4e47b01edc59f4ca04d","_id":"disposables@1.0.1","_shasum":"064727a25b54f502bd82b89aa2dfb8df9f1b39e3","_from":".","_npmVersion":"2.7.0","_nodeVersion":"1.5.1","_npmUser":{"name":"gaearon","email":"dan.abramov@gmail.com"},"maintainers":[{"name":"gaearon","email":"dan.abramov@gmail.com"}],"dist":{"shasum":"064727a25b54f502bd82b89aa2dfb8df9f1b39e3","tarball":"https://registry.npmjs.org/disposables/-/disposables-1.0.1.tgz"},"directories":{}}},"readme":"# disposables\n\nDisposables let you safely compose resource disposal semantics.\nThink DOM nodes, event handlers, socket connections.\n\nThis tiny package includes several disposables:\n\n* [`Disposable`](https://github.com/gaearon/disposables/blob/master/modules/Disposable.js) ensures its `dispose` action runs only once;\n* [`CompositeDisposable`](https://github.com/gaearon/disposables/blob/master/modules/CompositeDisposable.js) ensures a group of disposables are disposed together;\n* [`SerialDisposable`](https://github.com/gaearon/disposables/blob/master/modules/SerialDisposable.js) switches underlying disposables on the fly and disposes them.\n\nThis implementation of disposables is extracted from [RxJS](https://github.com/Reactive-Extensions/RxJS/blob/master/src/core/disposables).\nI took the liberty to tweak the code style to my liking and provide this as a standalone package.\n\nThe API is *mostly* the same as RxJS except stricter in a few places.\nIt does not strive for 100% API compatibility with RxJS, but general disposable behavior should match.\n\nIt's best if you consult the source and tests, as classes are small and few.\n\n### Usage\n\n#### Importing\n\n```js\nimport { Disposable, CompositeDisposable, SerialDisposable } from 'disposables';\n\n// or you can import just the ones you need to keep it even tinier\n// import SerialDisposable from 'disposables/modules/SerialDisposable';\n\nfunction attachHandlers(node) {\n\tlet someHandler = ...;\n\tnode.addEventHandler(someHandler);\n\n\t// use Disposable to guarantee single execution\n\treturn new Disposable(() => {\n\t  node.removeEventHandler(someHandler);\n\t});\n}\n\n// CompositeDisposable lets you compose several disposables...\nlet nodes = ...;\nlet compositeDisp = new CompositeDisposable(nodes.map(attachHandlers));\n\n// and more later...\nlet moreNodes = ...\nmoreNodes.map(attachHandlers).forEach(d => compositeDisp.add(d));\n\n// and dispose them at once!\nfunction goodbye() {\n\tcompositeDisp.dispose();\n}\n\n// ... or replace with a bunch of new ones ...\nlet serialDisp = new SerialDisposable();\nserialDisp.setDisposable(compositeDisp);\n\nfunction replaceNodes(newNodes) {\n\tlet nextCompositeDisp = newNodes.map(attachHandlers);\n\n\t// release all the previous disposables:\n\tserialDisp.setDisposable(nextCompositeDisp);\n}\n\n// with a guarantee of each dispose() called only once.\n```\n\n### Why Use This Over RxJS\n\n* You only need disposables and not observables;\n* RxJS is still figuring out [its modularity story](https://github.com/Reactive-Extensions/RxJS-Modular) and [it's not ready](https://github.com/Reactive-Extensions/RxJS-Modular/issues/4#issuecomment-90879664).\n\nReally, there are no other reasons.\n\n### License\n\nLike the original RxJS code, it is licened under Apache 2.0.\n","maintainers":[{"name":"gaearon","email":"dan.abramov@gmail.com"}],"time":{"modified":"2015-04-09T14:25:21.585Z","created":"2015-04-09T14:14:03.439Z","1.0.0":"2015-04-09T14:14:03.439Z","1.0.1":"2015-04-09T14:25:21.585Z"},"homepage":"https://github.com/gaearon/disposables","repository":{"type":"git","url":"https://github.com/gaearon/disposables.git"},"contributors":[{"name":"Dan Abramov","email":"dan.abramov@me.com"}],"author":{"name":"Cloud Programmability Team","url":"https://github.com/Reactive-Extensions/RxJS/blob/master/authors.txt"},"bugs":{"url":"https://github.com/gaearon/disposables/issues"},"readmeFilename":"README.md","users":{"nelix":true},"_attachments":{},"_etag":"\"5IVVZJ650AXNXVC1KVTUQ9JES\""}